(this["webpackJsonpfav-quotes"]=this["webpackJsonpfav-quotes"]||[]).push([[0],{51:function(e,t,c){},53:function(e,t,c){},79:function(e,t,c){"use strict";c.r(t);var a=c(0),n=c.n(a),s=c(17),l=c.n(s),i=(c(51),c(10)),o=c(16),r=c(5),j=(c(52),c(53),c(85)),u=c(14),b=c.n(u),d=c(1);var m=function(e){var t=e.quote;return Object(d.jsx)("div",{className:"card quote text-center",children:Object(d.jsx)("div",{className:"card-body",children:Object(d.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(d.jsx)("p",{children:Object(d.jsx)("q",{children:t.text})}),Object(d.jsx)("footer",{className:"blockquote-footer",children:t.by&&Object(d.jsx)("p",{children:t.by})})]})})})};var O=function(e){var t=e.quotes,c=e.dispatch,n=e.config;return Object(a.useEffect)((function(){0===t.length&&(console.log("getting my quotes: init"),c({type:"FETCH_INIT"}),b.a.get("/quotes/me",n).then((function(e){console.log("success"),c({type:"SET_MINE",data:e.data})})).catch((function(e){return c({type:"FETCH_ERROR"})})))}),[t]),Object(d.jsx)("div",{className:"center",children:0!==t.length&&t.map((function(e){return Object(d.jsx)(m,{quote:e},e._id)}))})};var h=function(e){var t=e.quotes,c=e.dispatch,n=e.config;return Object(a.useEffect)((function(){console.log("getting Public quotes: init"),c({type:"FETCH_INIT"}),b.a.get("/quotes",n).then((function(e){console.log("success"),c({type:"SET_ALL",data:e.data})})).catch((function(e){return c({type:"FETCH_ERROR"})}))}),[]),Object(d.jsx)("div",{children:0!==t.length&&t.map((function(e){return Object(d.jsx)(m,{quote:e},e._id)}))})};var g=function(e){var t=e.dispatch,c=Object(r.g)(),n=Object(a.useState)(""),s=Object(i.a)(n,2),l=s[0],o=s[1],j=Object(a.useState)(""),u=Object(i.a)(j,2),m=u[0],O=u[1];return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h2",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log("login init"),b.a.post("/users/login",{email:l,password:m}).then((function(e){console.log("login success",e),t({type:"SET_USER",data:e.data}),c.push("/me")})).catch((function(e){console.log("login fail",e),t({type:"FETCH_ERROR",data:e.message})}))},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(d.jsx)("input",{value:l,id:"email",type:"email",onChange:function(e){return o(e.target.value)},className:"form-control"})]}),Object(d.jsxs)("div",{className:"form-group  mb-3",children:[Object(d.jsx)("label",{htmlFor:"pw",className:"form-label",children:"Password"}),Object(d.jsx)("input",{value:m,id:"pw",type:"password",onChange:function(e){return O(e.target.value)},className:"form-control"})]}),Object(d.jsx)("button",{type:"submit",children:"Go"})]})]})};var f=function(e){var t=e.dispatch,c=Object(r.g)(),n=Object(a.useState)(""),s=Object(i.a)(n,2),l=s[0],o=s[1],j=Object(a.useState)(""),u=Object(i.a)(j,2),m=u[0],O=u[1],h=Object(a.useState)(""),g=Object(i.a)(h,2),f=g[0],p=g[1];return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)("h3",{children:"Sign up"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b.a.post("/users",{email:l,username:m,password:f}).then((function(e){console.log("signup success",e),t({type:"SET_USER",data:e.data}),c.push("/public")})).catch((function(e){console.log(e),t({type:"FETCH_ERROR",data:e.message})}))},children:[Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),Object(d.jsx)("input",{value:l,id:"email",type:"email",onChange:function(e){return o(e.target.value)},className:"form-control"})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"username",className:"form-label",children:"Username"}),Object(d.jsx)("input",{value:m,id:"username",type:"text",onChange:function(e){return O(e.target.value)},className:"form-control"})]}),Object(d.jsxs)("div",{className:"form-group mb-3",children:[Object(d.jsx)("label",{htmlFor:"pw",className:"form-label",children:"Password"}),Object(d.jsx)("input",{value:f,id:"pw",type:"password",onChange:function(e){return p(e.target.value)},className:"form-control"})]}),Object(d.jsx)("button",{type:"submit",children:"Go"})]})]})},p=c(45);var x=function(e){var t=e.config,c=e.dispatch,n=Object(a.useState)(""),s=Object(i.a)(n,2),l=s[0],o=s[1],r=Object(a.useState)(""),j=Object(i.a)(r,2),u=j[0],m=j[1],O=Object(a.useState)(!1),h=Object(i.a)(O,2),g=h[0],f=h[1];return Object(d.jsxs)("div",{className:"add",children:[Object(d.jsx)("h2",{children:"Add Quote"}),Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(!1);var a={text:l};0!==u.length&&(a.by=u),!0===e.target.isPublic.checked&&(a.private=!1),console.log("posting this quote",a),b.a.post("/quotes",a,t).then((function(e){console.log(e),c({type:"ADD_QUOTE",data:a}),f(!0),o(""),m("")})).catch((function(e){return c({type:"ERROR",data:e.message})}))},children:[Object(d.jsxs)("div",{className:"mb-1",children:[Object(d.jsx)("label",{className:"form-label",children:"Quote "}),Object(d.jsx)("input",{value:l,onChange:function(e){return o(e.target.value)},className:"form-control"})]}),Object(d.jsxs)("div",{className:"mb-1",children:[Object(d.jsx)("label",{className:"form-label",children:"By "}),Object(d.jsx)("input",{value:u,onChange:function(e){return m(e.target.value)},className:"form-control"})]}),Object(d.jsxs)("div",{className:"form-check mb-1",children:[Object(d.jsx)("input",{className:"form-check-input",type:"checkbox",id:"isPublic"}),Object(d.jsx)("label",{className:"form-check-label",htmlFor:"isPublic",children:"Public"})]}),Object(d.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Add"})]}),g&&Object(d.jsx)(p.a,{variant:"success",children:"Quote added"})]})},v=c(46),N=c(13),E={all:[],mine:[],token:null,error:null,loading:!1,user:null};var y=function(e,t){switch(t.type){case"SET_USER":return Object(N.a)(Object(N.a)({},e),{},{token:t.data.token,user:t.data.user});case"SET_ALL":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,all:t.data});case"SET_MINE":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,mine:t.data});case"FETCH_INIT":return Object(N.a)(Object(N.a)({},e),{},{loading:!0,error:null});case"FETCH_ERROR":return Object(N.a)(Object(N.a)({},e),{},{loading:!1,error:t.data});case"ADD_QUOTE":return Object(N.a)(Object(N.a)({},e),{},{mine:[].concat(Object(v.a)(e.mine),[t.data])});case"LOGOUT":return E;default:return e}};var C=function(){var e,t=Object(a.useReducer)(y,E),c=Object(i.a)(t,2),n=c[0],s=c[1],l=Object(a.useState)({}),u=Object(i.a)(l,2),m=u[0],p=u[1];function v(e){console.log("logout"),b.a.post(e,{},m).then((function(e){s({type:"LOGOUT"}),p(null)})).catch((function(e){console.log("logout fail"),s({type:"FETCH_ERROR",data:e.message})}))}return Object(a.useEffect)((function(){null!==n.token&&p({headers:{Authorization:"Bearer ".concat(n.token)}})}),[n.token]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h1",{className:"center",children:"Quote it"}),Object(d.jsxs)(o.a,{children:[Object(d.jsxs)("ul",{className:"nav nav-tabs justify-content-end navigation-bar",children:[!n.token&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{to:"/login",className:"nav-link",activeClassName:"selected",children:"Login"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{to:"/signup",className:"nav-link",activeClassName:"selected",children:"Sign up"})})]}),n.token&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{to:"/public",className:"nav-link",activeClassName:"selected",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{to:"/me",className:"nav-link",activeClassName:"selected",children:"Me"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{to:"/add",className:"nav-link",activeClassName:"selected",children:"Add"})})]}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(j.a,{children:(null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.username)&&Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(j.a.Toggle,{variant:"success",id:"dropdown-basic",children:["Hi, ",n.user.username]}),Object(d.jsxs)(j.a.Menu,{children:[Object(d.jsx)(j.a.Item,{onClick:function(){return v("/users/logout")},children:"Logout"}),Object(d.jsx)(j.a.Item,{onClick:function(){return v("/users/logoutAll")},children:"Logout All"})]})]})})})]}),Object(d.jsx)("div",{className:"notification",children:n.error&&Object(d.jsxs)("div",{className:"error-notif",children:["Error:  ",n.error]})}),null===m&&Object(d.jsx)(r.a,{to:"/login"}),Object(d.jsxs)(r.d,{children:[Object(d.jsx)(r.b,{path:"/add",children:Object(d.jsx)(x,{dispatch:s,config:m})}),Object(d.jsx)(r.b,{path:"/me",children:Object(d.jsx)(O,{quotes:n.mine,dispatch:s,config:m})}),Object(d.jsx)(r.b,{path:"/public",children:Object(d.jsx)(h,{quotes:n.all,dispatch:s,config:m})}),Object(d.jsx)(r.b,{path:"/signup",children:Object(d.jsx)(f,{dispatch:s})}),Object(d.jsx)(r.b,{path:"/login",children:Object(d.jsx)(g,{dispatch:s})}),Object(d.jsx)(r.b,{path:"/",children:Object(d.jsx)(r.a,{to:"/login"})})]})]})]})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,86)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,l=t.getTTFB;c(e),a(e),n(e),s(e),l(e)}))};l.a.render(Object(d.jsx)(n.a.StrictMode,{children:Object(d.jsx)(C,{})}),document.getElementById("root")),S()}},[[79,1,2]]]);
//# sourceMappingURL=main.400563b8.chunk.js.map